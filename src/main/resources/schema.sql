DROP TABLE IF EXISTS track CASCADE;
DROP TABLE IF EXISTS track_hooks CASCADE;
DROP TABLE IF EXISTS users CASCADE;

CREATE TABLE IF NOT EXISTS track
(
    track_id       BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    creator_id     BIGINT                                              NOT NULL,
    name           VARCHAR(255)                                        NOT NULL,
    description    VARCHAR(255)                                        NOT NULL,
    grade          VARCHAR(255)                                        NOT NULL,
    rating         INTEGER,
    video_url      VARCHAR(255),
    climbs         INTEGER,
    average_grade  VARCHAR(255),
    published_date TIMESTAMP WITHOUT TIME ZONE
);

CREATE TABLE IF NOT EXISTS user_type
(
    type_id      BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name    VARCHAR(50) UNIQUE NOT NULL
);

CREATE TABLE IF NOT EXISTS users
(
    user_id      BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name    VARCHAR(60) NOT NULL,
    email   VARCHAR(60) NOT NULL,
    city    VARCHAR(90),
    rate    BIGINT
);

CREATE TABLE IF NOT EXISTS track_hooks(
    track_id           BIGINT NOT NULL,
    track_number_field VARCHAR(255)                                   NOT NULL,
    FOREIGN KEY (track_id) REFERENCES track(track_id)
);
